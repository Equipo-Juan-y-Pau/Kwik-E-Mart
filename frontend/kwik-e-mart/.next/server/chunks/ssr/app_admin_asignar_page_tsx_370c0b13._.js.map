{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juanf/OneDrive/Desktop/desarrolloweb/Kwik-E-Mart/frontend/kwik-e-mart/app/admin/asignar/page.tsx"],"sourcesContent":["// app/admin/asignar/page.tsx\r\n'use client';\r\n\r\nimport { useState, useEffect, FormEvent } from 'react';\r\nimport clsx from 'clsx';\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                   Tipos                                    */\r\n/* -------------------------------------------------------------------------- */\r\n\r\ninterface Producto { id: number; nombre: string }\r\ninterface Promo     { id: number; nombre: string; descripcion: string }\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                           Helpers localStorage                             */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nconst getProductos = (): Producto[] =>\r\n  JSON.parse(localStorage.getItem('kwikemart_productos') || '[]');\r\n\r\nconst getPromos = (): Promo[] =>\r\n  JSON.parse(localStorage.getItem('kwikemart_promos') || '[]');\r\n\r\nconst saveAsignacion = (productoId: number, promoId: number) => {\r\n  const asign = JSON.parse(localStorage.getItem('kwikemart_asignaciones') || '[]');\r\n  localStorage.setItem('kwikemart_asignaciones', JSON.stringify([...asign, { productoId, promoId }]));\r\n};\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/*                                 Componente                                 */\r\n/* -------------------------------------------------------------------------- */\r\n\r\nexport default function AsignarPromosPage() {\r\n  const [productos, setProductos] = useState<Producto[]>([]);\r\n  const [promos,     setPromos]   = useState<Promo[]>([]);\r\n\r\n  const [productoId, setProductoId] = useState<number | ''>('');\r\n  const [promoId,    setPromoId]    = useState<number | ''>('');\r\n\r\n  const [msg, setMsg] = useState<{ ok?: string; err?: string }>({});\r\n\r\n  /* Carga inicial */\r\n  useEffect(() => {\r\n    setProductos(getProductos());\r\n    setPromos(getPromos());\r\n  }, []);\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    setMsg({});\r\n    if (!productoId || !promoId) return setMsg({ err: 'Selecciona un producto Y una promoción.' });\r\n\r\n    saveAsignacion(+productoId, +promoId);\r\n    setMsg({ ok: '¡Promoción asignada correctamente!' });\r\n    setProductoId('');\r\n    setPromoId('');\r\n  };\r\n\r\n  /* ------------------------------ UI ---------------------------------- */\r\n  return (\r\n    <section className=\"relative min-h-[700px] p-6 pb-22\">\r\n      <div className=\"mx-auto mt-12 flex max-w-xl flex-col items-center rounded-lg bg-white p-8 shadow-lg\">\r\n        <h1 className=\"mb-6 text-2xl font-bold text-blue-900\">Asignar Promoción a Producto</h1>\r\n\r\n        <form onSubmit={handleSubmit} className=\"w-full space-y-6\">\r\n          {/* Producto */}\r\n          <Select\r\n            label=\"Producto\"\r\n            value={productoId}\r\n            onChange={(v) => setProductoId(v)}\r\n            color=\"yellow\"\r\n            placeholder=\"Selecciona un producto…\"\r\n            options={productos.map(({ id, nombre }) => ({ value: id, label: nombre }))}\r\n          />\r\n\r\n          {/* Promo */}\r\n          <Select\r\n            label=\"Promoción\"\r\n            value={promoId}\r\n            onChange={(v) => setPromoId(v)}\r\n            color=\"blue\"\r\n            placeholder=\"Selecciona una promoción…\"\r\n            options={promos.map(({ id, nombre, descripcion }) => ({\r\n              value: id,\r\n              label: `${nombre} — ${descripcion}`,\r\n            }))}\r\n          />\r\n\r\n          {/* Mensajes */}\r\n          {msg.err && <p className=\"font-semibold text-red-600\">{msg.err}</p>}\r\n          {msg.ok  && <p className=\"font-semibold text-green-600\">{msg.ok}</p>}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full rounded-lg bg-blue-600 py-2 text-lg font-semibold text-white transition hover:bg-blue-700\"\r\n          >\r\n            Asignar Promoción\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n/* --------------------------- Sub-componentes --------------------------- */\r\n\r\nconst Select = ({\r\n  label,\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  options,\r\n  color,\r\n}: {\r\n  label: string;\r\n  value: number | '';\r\n  onChange: (v: number | '') => void;\r\n  placeholder: string;\r\n  options: { value: number; label: string }[];\r\n  color: 'yellow' | 'blue';\r\n}) => (\r\n  <div>\r\n    <label className=\"mb-1 block font-semibold text-gray-800\">{label}</label>\r\n    <select\r\n      value={value}\r\n      onChange={(e) => onChange(e.target.value === '' ? '' : +e.target.value)}\r\n      className={clsx(\r\n        'w-full rounded px-3 py-2 text-lg border-2',\r\n        color === 'yellow' ? 'border-yellow-400' : 'border-blue-400',\r\n        !value && 'text-gray-400',\r\n      )}\r\n    >\r\n      <option value=\"\">{placeholder}</option>\r\n      {options.length === 0 && <option disabled>Sin datos aún</option>}\r\n      {options.map((o) => (\r\n        <option key={o.value} value={o.value}>\r\n          {o.label}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  </div>\r\n);\r\n"],"names":[],"mappings":"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","debugId":null}}]
}