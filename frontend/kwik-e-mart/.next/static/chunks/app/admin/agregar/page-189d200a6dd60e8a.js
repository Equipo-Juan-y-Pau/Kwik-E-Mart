(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{860:(e,r,l)=>{Promise.resolve().then(l.bind(l,5483))},2596:(e,r,l)=>{"use strict";function s(){for(var e,r,l=0,s="",t=arguments.length;l<t;l++)(e=arguments[l])&&(r=function e(r){var l,s,t="";if("string"==typeof r||"number"==typeof r)t+=r;else if("object"==typeof r){if(Array.isArray(r)){var a=r.length;for(l=0;l<a;l++)r[l]&&(s=e(r[l]))&&(t&&(t+=" "),t+=s)}else for(s in r)r[s]&&(t&&(t+=" "),t+=s)}return t}(e))&&(s&&(s+=" "),s+=r);return s}l.d(r,{$:()=>s,A:()=>t});let t=s},5483:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>p});var s=l(5155),t=l(2115),a=l(5695),o=l(2596);let n=["bebida","fr\xedo","dulce","panader\xeda","refresco","snack","krusty","salado","chicle","revista","lectura","caliente","comida"],i=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","Sabado"],d=()=>JSON.parse(localStorage.getItem("kwikemart_promos")||"[]"),c=e=>{let r=d();localStorage.setItem("kwikemart_promos",JSON.stringify([...r,e]))};function u(){let[e,r]=(0,t.useState)(new Date);(0,t.useEffect)(()=>{let e=setInterval(()=>r(new Date),1e3);return()=>clearInterval(e)},[]);let l=i[e.getDay()],[a,o,n]=[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>e.toString().padStart(2,"0"));return(0,s.jsxs)("div",{className:"select-none rounded-2xl border-4 border-amber-800 bg-black shadow-2xl",style:{width:300,height:170,boxShadow:"0 0 30px rgba(100,77,50,.33)"},children:[(0,s.jsx)("p",{className:"mt-2 mb-3 text-center text-2xl font-extrabold tracking-wider text-blue-200 uppercase",style:{textShadow:"0 1px 6px #60a5fa,0 2px 10px #0ea5e9",letterSpacing:".16em"},children:l}),(0,s.jsxs)("p",{className:"text-center font-mono font-bold text-green-400 text-[2.5rem] md:text-[3rem]",style:{textShadow:"0 0 22px #22d3ee,0 0 4px #14b8a6,0 0 2px #0f766e",letterSpacing:".17em"},children:[a,":",o,":",n]})]})}let m=(0,s.jsxs)(x,{children:["\xa1Excelente elecci\xf3n, joven comerciante! Con este producto tu estanter\xeda brillar\xe1 m\xe1s que mis Squishees de uva… ",(0,s.jsx)("b",{children:"\xa1Oh yeah!"})]}),b=(0,s.jsxs)(x,{children:["\xa1Una promoci\xf3n digna de Springfield! Los clientes har\xe1n fila; y si no, siempre quedan donas y Squishees para tentar sus bolsillos. ",(0,s.jsx)("b",{children:"\xa1Viva la econom\xeda Kwik-E!"})]});function x(e){let{children:r}=e;return(0,s.jsx)("div",{className:"relative mb-6 mt-10",children:(0,s.jsxs)("div",{className:"relative left-4 w-[97%] rounded-lg border-2 border-blue-400 bg-white px-8 py-4 shadow-md",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:r}),(0,s.jsx)("div",{className:"absolute -bottom-[10px] left-6 h-0 w-0 border-l-[5px] border-l-transparent border-r-[20px] border-r-transparent border-t-[10px] border-t-blue-400"}),(0,s.jsx)("div",{className:"absolute -bottom-[8px] left-[calc(1rem+1px)] h-0 w-0 border-l-[5px] border-l-transparent border-r-[20px] border-r-transparent border-t-[8px] border-t-white"})]})})}function p(){let[e,r]=(0,t.useState)("producto"),l=(0,a.useRouter)(),[n,i]=(0,t.useState)(),[d,x]=(0,t.useState)(),[p,h]=(0,t.useState)(""),[f,j]=(0,t.useState)(""),[N,w]=(0,t.useState)([]),[y,S]=(0,t.useState)(""),[k,C]=(0,t.useState)(""),[P,D]=(0,t.useState)(""),[q,_]=(0,t.useState)("descuento"),[A,E]=(0,t.useState)(10),[O,I]=(0,t.useState)(""),[R,J]=(0,t.useState)(""),[U,L]=(0,t.useState)([]),[M,T]=(0,t.useState)({});return(0,s.jsxs)("section",{className:"relative min-h-[700px] p-6 pb-22",children:[(0,s.jsxs)("div",{className:"mx-auto flex max-w-7xl flex-col gap-8 md:flex-row md:items-stretch",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col items-center",children:["producto"===e?m:b,(0,s.jsx)("div",{className:"mb-8 flex w-full max-w-lg gap-4",children:["producto","promo"].map(l=>(0,s.jsx)("button",{onClick:()=>r(l),className:(0,o.A)("flex-1 rounded-t-lg border-b-4 px-6 py-2 font-bold transition",e===l?"producto"===l?"bg-yellow-400 border-yellow-700 text-yellow-900":"bg-blue-400 border-blue-700 text-blue-900":"bg-white border-gray-200 text-gray-600 hover:bg-gray-100"),children:"producto"===l?"Crear Producto":"Crear Promoci\xf3n"},l))}),(0,s.jsx)("div",{className:"flex w-full justify-center",children:"producto"===e?(0,s.jsx)(g,{previewSrc:n,nombre:p,precio:f,etiquetas:N,descripcion:y,sabores:k,tamanos:P,handleFile:e=>{var r;let l=null===(r=e.target.files)||void 0===r?void 0:r[0];l&&(x(l),i(URL.createObjectURL(l)))},toggleTag:e=>w(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e]),setNombre:h,setPrecio:j,setDescripcion:S,setSabores:C,setTamanos:D,handleSubmitProducto:e=>{if(e.preventDefault(),!d)return alert("Debes subir una imagen");let r={id:Date.now(),nombre:p,precio:parseFloat(f),imagen:"/images/".concat(d.name),etiquetas:N,descripcion:y,opciones:{sabor:k.split(",").map(e=>e.trim()).filter(Boolean),tamaño:P.split(",").map(e=>e.trim()).filter(Boolean)}},s=JSON.parse(localStorage.getItem("kwikemart_productos")||"[]");localStorage.setItem("kwikemart_productos",JSON.stringify([...s,r])),l.push("/admin/visualizar")}}):(0,s.jsx)(v,{tipo:q,valor:A,nombrePromo:O,descPromo:R,diasSemana:U,msg:M,toggleDia:e=>L(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e]),setTipo:_,setValor:E,setNombrePromo:I,setDescPromo:J,handleSubmitPromo:e=>(e.preventDefault(),T({}),O.trim()&&R.trim()&&0!==U.length)?"descuento"===q&&(A<1||A>99)?T({err:"El descuento debe estar entre 1 % y 99 %"}):void(c({id:Date.now(),tipo:q,valor:"descuento"===q?A:void 0,nombre:O,descripcion:R,diasSemana:[...U].sort()}),T({ok:"\xa1Promoci\xf3n creada!"}),I(""),J(""),L([]),E(10),_("descuento"),setTimeout(()=>l.push("/admin/visualizar"),1200)):T({err:"Completa todos los campos y elige al menos un d\xeda."})})})]}),(0,s.jsx)("div",{className:"hidden min-w-[190px] md:flex md:w-[25%] flex-col items-center justify-center",children:(0,s.jsx)(u,{})})]}),(0,s.jsx)("div",{className:"mt-12 flex justify-center md:hidden",children:(0,s.jsx)(u,{})})]})}function g(e){let{previewSrc:r,nombre:l,precio:t,etiquetas:a,descripcion:o,sabores:n,tamanos:i,handleFile:d,toggleTag:c,setNombre:u,setPrecio:m,setDescripcion:b,setSabores:x,setTamanos:p,handleSubmitProducto:g}=e;return(0,s.jsxs)("div",{className:"mb-12 w-full max-w-2xl rounded-lg bg-white p-8 shadow-lg",children:[(0,s.jsx)("h1",{className:"mb-6 text-2xl font-bold",children:"Agregar Nuevo Producto"}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:"Nombre"}),(0,s.jsx)("input",{value:l,onChange:e=>u(e.target.value),required:!0,className:"w-full rounded border-2 border-green-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:"Precio"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:t,onChange:e=>m(e.target.value),required:!0,className:"w-full rounded border-2 border-green-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),(0,s.jsx)(h,{etiquetas:a,toggleTag:c}),(0,s.jsx)(f,{label:"Descripci\xf3n",value:o,onChange:b}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsx)(j,{label:"Sabores",placeholder:"p.ej. Cereza, Uva, Cola",value:n,onChange:x}),(0,s.jsx)(j,{label:"Tama\xf1os",placeholder:"p.ej. Peque\xf1o, Mediano, Grande",value:i,onChange:p})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:"Imagen"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:d,required:!0,className:"mb-2 block"}),r&&(0,s.jsx)("img",{src:r,alt:"preview",className:"h-40 w-40 rounded border object-cover"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-green-500 py-2 font-semibold text-white transition hover:bg-green-600",children:"Guardar Producto"})]})]})}let h=e=>{let{etiquetas:r,toggleTag:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block font-semibold",children:"Categor\xedas"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>l(e),className:(0,o.A)("rounded-full border px-4 py-1 transition",r.includes(e)?"bg-green-400 border-green-600 text-white":"bg-white border-gray-300 text-gray-800 hover:bg-gray-100"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})},f=e=>{let{label:r,value:l,onChange:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:r}),(0,s.jsx)("textarea",{value:l,onChange:e=>t(e.target.value),className:"h-24 w-full rounded border-2 border-green-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"})]})},j=e=>{let{label:r,placeholder:l,value:t,onChange:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"mb-1 block font-semibold",children:[r," ",(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"(coma-separados)"})]}),(0,s.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:l,className:"w-full rounded border-2 border-green-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"})]})};function v(e){let{tipo:r,valor:l,nombrePromo:t,descPromo:a,diasSemana:n,msg:d,toggleDia:c,setTipo:u,setValor:m,setNombrePromo:b,setDescPromo:x,handleSubmitPromo:p}=e;return(0,s.jsxs)("div",{className:"w-full max-w-xl rounded-lg bg-white p-8 shadow-lg",children:[(0,s.jsx)("h1",{className:"mb-6 text-2xl font-bold",children:"Crear Nueva Promoci\xf3n"}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:"Tipo de Promoci\xf3n"}),(0,s.jsxs)("select",{value:r,onChange:e=>{let r=e.target.value;u(r),"descuento"!==r&&m(0)},className:"w-full rounded border-2 border-blue-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,s.jsx)("option",{value:"descuento",children:"Descuento %"}),(0,s.jsx)("option",{value:"2x1",children:"2\xd71"}),(0,s.jsx)("option",{value:"nuevo",children:"Nuevo"}),(0,s.jsx)("option",{value:"solo-hoy",children:"S\xf3lo hoy"})]})]}),"descuento"===r&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:"Porcentaje (%)"}),(0,s.jsx)("input",{type:"number",min:1,max:99,value:l,onChange:e=>m(Number(e.target.value)),className:"w-full rounded border-2 border-blue-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]})]}),(0,s.jsx)(N,{label:"Nombre",value:t,onChange:b,placeholder:"Ej. Promo Squishee"}),(0,s.jsx)(f,{label:"Descripci\xf3n",value:a,onChange:x}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:"D\xedas de la semana"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map((e,r)=>(0,s.jsx)("button",{type:"button",onClick:()=>c(r),className:(0,o.A)("rounded-full border px-4 py-1 font-semibold transition",n.includes(r)?"bg-blue-400 border-blue-600 text-white":"bg-white border-gray-300 text-gray-800 hover:bg-gray-100"),children:e},e))})]}),d.err&&(0,s.jsx)("p",{className:"font-semibold text-red-500",children:d.err}),d.ok&&(0,s.jsx)("p",{className:"font-semibold text-green-600",children:d.ok}),(0,s.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-blue-500 py-2 font-semibold text-white transition hover:bg-blue-600",children:"Guardar Promoci\xf3n"})]})]})}let N=e=>{let{label:r,value:l,onChange:t,placeholder:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block font-semibold",children:r}),(0,s.jsx)("input",{value:l,onChange:e=>t(e.target.value),placeholder:a,className:"w-full rounded border-2 border-blue-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]})}},5695:(e,r,l)=>{"use strict";var s=l(8999);l.o(s,"useParams")&&l.d(r,{useParams:function(){return s.useParams}}),l.o(s,"usePathname")&&l.d(r,{usePathname:function(){return s.usePathname}}),l.o(s,"useRouter")&&l.d(r,{useRouter:function(){return s.useRouter}})}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(860)),_N_E=e.O()}]);