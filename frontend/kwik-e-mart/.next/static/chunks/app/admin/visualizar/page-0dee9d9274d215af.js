(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{2525:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4517:(e,r,s)=>{Promise.resolve().then(s.bind(s,5127))},5127:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(5155),a=s(2115);let l=(0,s(9946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var i=s(2525);let d=["bebida","fr\xedo","dulce","panader\xeda","refresco","snack","krusty","salado","chicle","revista","lectura","caliente","comida"],n=()=>JSON.parse(localStorage.getItem("kwikemart_productos")||"[]");function o(){let[e,r]=(0,a.useState)("productos"),[s,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[b,g]=(0,a.useState)(""),[j,N]=(0,a.useState)([]),[v,f]=(0,a.useState)([]),[y,w]=(0,a.useState)([]),[k,C]=(0,a.useState)(null),[S,A]=(0,a.useState)({});(0,a.useEffect)(()=>{N(n()),f(JSON.parse(localStorage.getItem("kwikemart_users")||"[]")),w(JSON.parse(localStorage.getItem("kwikemart_orders")||"[]"))},[]);let I=i?j.filter(e=>e.id.toString()===i):j,q=i?v.filter(e=>e.id.toString()===i):v,O=y.filter(e=>!u||e.id.toString()===u).filter(e=>!b||e.userId.toString()===b),E=()=>{C(null),A({})};return(0,t.jsxs)("section",{className:"relative bg-[#e9d29a] p-6 pb-32",children:[(0,t.jsx)("div",{className:"relative mb-6 mt-8 w-full",children:(0,t.jsxs)("div",{className:"relative w-[80%] rounded-lg border-2 border-blue-400 bg-white px-8 py-4 shadow-md",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:"\xa1Por la gracia de los Squishees! Inspecciona usuarios, pedidos y productosâ€¦ tan r\xe1pido como sirvo un Squishee de cereza."}),(0,t.jsx)("div",{className:"absolute -bottom-[10px] left-6 h-0 w-0 border-l-[5px] border-l-transparent border-r-[20px] border-r-transparent border-t-[10px] border-t-blue-400"}),(0,t.jsx)("div",{className:"absolute -bottom-[8px] left-[calc(1rem+1px)] h-0 w-0 border-l-[5px] border-l-transparent border-r-[20px] border-r-transparent border-t-[8px] border-t-white"})]})}),(0,t.jsx)(c,{view:e,dropdownOpen:s,setDropdown:l,setView:r,searchId:i,setSearchId:o,orderId:u,setOrderId:h,userId:b,setUserId:g}),"productos"===e&&(0,t.jsx)(x,{productos:I,tagOptions:d,editingId:k,editData:S,startEdit:e=>{var r;C(e.id),A({...e,opciones:{...null!==(r=e.opciones)&&void 0!==r?r:{}},etiquetas:[...e.etiquetas]})},cancelEdit:E,saveEdit:()=>{if(!k)return;let e=j.map(e=>e.id===k?{...e,...S}:e);localStorage.setItem("kwikemart_productos",JSON.stringify(e)),N(e),E()},deleteProducto:e=>{if(!confirm("\xbfSeguro que quieres eliminar este producto?"))return;let r=j.filter(r=>r.id!==e);localStorage.setItem("kwikemart_productos",JSON.stringify(r)),N(r)},onChangeField:(e,r)=>A(s=>({...s,[e]:"precio"===e?+r:r})),onChangeImage:e=>{var r;let s=null===(r=e.currentTarget.files)||void 0===r?void 0:r[0];s&&A(e=>({...e,imagen:s.name}))},onChangeOption:(e,r)=>A(s=>{var t;return{...s,opciones:{...null!==(t=s.opciones)&&void 0!==t?t:{},[e]:r.split(",").map(e=>e.trim())}}}),toggleTag:e=>A(r=>{var s;let t=null!==(s=r.etiquetas)&&void 0!==s?s:[];return{...r,etiquetas:t.includes(e)?t.filter(r=>r!==e):[...t,e]}})}),"usuarios"===e&&(0,t.jsx)(p,{users:q}),"pedidos"===e&&(0,t.jsx)(m,{orders:O})]})}function c(e){let{view:r,dropdownOpen:s,setDropdown:a,setView:i,searchId:d,setSearchId:n,orderId:o,setOrderId:c,userId:x,setUserId:p}=e;return(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-center space-x-6",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Filtrar por:"}),(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsxs)("button",{onClick:()=>a(!s),className:"flex items-center gap-2 rounded-full border-2 border-green-300 bg-white px-5 py-3 shadow hover:bg-gray-100",children:[(0,t.jsx)(l,{size:16})," Abrir filtros"]}),s&&(0,t.jsx)("ul",{className:"absolute z-20 mt-2 w-40 rounded border bg-white shadow-lg",children:["productos","usuarios","pedidos"].map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("button",{onClick:()=>{i(e),a(!1),n(""),c(""),p("")},className:"block w-full px-5 py-3 text-left hover:bg-green-200 ".concat(r===e?"bg-green-300 font-semibold":""),children:e[0].toUpperCase()+e.slice(1)})},e))})]}),"pedidos"===r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{label:"ID pedido",val:o,onChange:c}),(0,t.jsx)(u,{label:"ID usuario",val:x,onChange:p})]}):(0,t.jsx)(u,{label:"ID",val:d,onChange:n})]})}let u=e=>{let{label:r,val:s,onChange:a}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"font-semibold",children:[r,":"]}),(0,t.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"...",className:"rounded-full border-2 border-green-300 bg-white px-5 py-3 shadow-sm focus:ring-2 focus:ring-green-400"})]})};function x(e){let{productos:r,tagOptions:s,editingId:a,editData:l,startEdit:d,cancelEdit:n,saveEdit:o,deleteProducto:c,onChangeField:u,onChangeImage:x,onChangeOption:p,toggleTag:m}=e;return(0,t.jsxs)("div",{className:"overflow-auto",children:[(0,t.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"Productos"}),(0,t.jsxs)("table",{className:"min-w-full rounded bg-white shadow",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsx)("tr",{children:["ID","Imagen","Nombre","Precio","Descripci\xf3n","Etiquetas","Opciones","Acciones"].map(e=>(0,t.jsx)("th",{className:"px-4 py-2",children:e},e))})}),(0,t.jsx)("tbody",{children:r.map(e=>{var r,h,b,g,j,N;let v=a===e.id;return(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:e.id}),(0,t.jsx)("td",{className:"px-4 py-2",children:v?(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:x}):(0,t.jsx)("img",{src:e.imagen,alt:e.nombre,className:"h-12 w-12 rounded object-contain"})}),(0,t.jsx)("td",{className:"px-4 py-2",children:v?(0,t.jsx)("textarea",{rows:2,className:"w-full rounded border px-2 py-1",value:null!==(h=l.nombre)&&void 0!==h?h:"",onChange:e=>u("nombre",e.target.value)}):e.nombre}),(0,t.jsx)("td",{className:"px-4 py-2 text-right",children:v?(0,t.jsx)("input",{type:"number",className:"w-full rounded border px-2 py-1 text-right",value:null!==(b=null===(r=l.precio)||void 0===r?void 0:r.toString())&&void 0!==b?b:"",onChange:e=>u("precio",e.target.value)}):"$".concat(e.precio.toFixed(2))}),(0,t.jsx)("td",{className:"px-4 py-2",children:v?(0,t.jsx)("textarea",{rows:3,className:"w-full rounded border px-2 py-1",value:null!==(g=l.descripcion)&&void 0!==g?g:"",onChange:e=>u("descripcion",e.target.value)}):e.descripcion}),(0,t.jsx)("td",{className:"px-4 py-2",children:v?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map(e=>{var r;let s=null===(r=l.etiquetas)||void 0===r?void 0:r.includes(e);return(0,t.jsx)("span",{onClick:()=>m(e),className:"cursor-pointer rounded-full border px-2 py-1 ".concat(s?"border-green-500 bg-green-300":"border-gray-300 bg-white"),children:e},e)})}):e.etiquetas.join(", ")}),(0,t.jsx)("td",{className:"px-4 py-2",children:v?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("small",{className:"text-gray-600",children:"Separa por comas"}),Object.entries(null!==(j=l.opciones)&&void 0!==j?j:{}).map(e=>{let[r,s]=e;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("label",{className:"font-semibold capitalize",children:[r,":"]}),(0,t.jsx)("input",{className:"rounded border px-2 py-1",value:s.join(", "),onChange:e=>p(r,e.target.value)})]},r)})]}):Object.entries(null!==(N=e.opciones)&&void 0!==N?N:{}).map(e=>{let[r,s]=e;return"".concat(r,": ").concat(s.join(", "))}).join(" | ")}),(0,t.jsx)("td",{className:"px-4 py-2 text-center",children:v?(0,t.jsxs)("div",{className:"mt-4 flex flex-col items-center space-y-2",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:o,className:"rounded bg-green-500 px-3 py-1 text-white hover:bg-green-600",children:"Guardar"}),(0,t.jsx)("button",{onClick:()=>c(e.id),className:"rounded bg-red-500 p-2 text-white hover:bg-red-600",children:(0,t.jsx)(i.A,{size:16})})]}),(0,t.jsx)("button",{onClick:n,className:"rounded bg-gray-300 px-3 py-1 text-gray-800 hover:bg-gray-400",children:"Cancelar"})]}):(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>d(e),className:"rounded bg-blue-500 px-3 py-1 text-white hover:bg-blue-600",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>c(e.id),className:"rounded bg-red-500 p-2 text-white hover:bg-red-600",children:(0,t.jsx)(i.A,{size:16})})]})})]},e.id)})})]})]})}let p=e=>{let{users:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"Usuarios"}),(0,t.jsxs)("table",{className:"min-w-full rounded bg-white shadow",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsx)("tr",{children:["ID","Nombre","Email"].map(e=>(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:e},e))})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:e.id}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.username}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.email})]},e.id))})]})]})},m=e=>{let{orders:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"Pedidos"}),(0,t.jsxs)("table",{className:"min-w-full rounded bg-white shadow",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsx)("tr",{children:["ID pedido","ID usuario","Producto","Cantidad","Total"].map(e=>(0,t.jsx)("th",{className:"px-4 py-2 ".concat("Cantidad"===e||"Total"===e?"text-right":"text-left"),children:e},e))})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:e.id}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.userId}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.productName}),(0,t.jsx)("td",{className:"px-4 py-2 text-right",children:e.quantity}),(0,t.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",e.total.toFixed(2)]})]},e.id))})]})]})}},9946:(e,r,s)=>{"use strict";s.d(r,{A:()=>c});var t=s(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase()),i=e=>{let r=l(e);return r.charAt(0).toUpperCase()+r.slice(1)},d=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return r.filter((e,r,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,r)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...x}=e;return(0,t.createElement)("svg",{ref:r,...n,width:a,height:a,stroke:s,strokeWidth:i?24*Number(l)/Number(a):l,className:d("lucide",o),...x},[...u.map(e=>{let[r,s]=e;return(0,t.createElement)(r,s)}),...Array.isArray(c)?c:[c]])}),c=(e,r)=>{let s=(0,t.forwardRef)((s,l)=>{let{className:n,...c}=s;return(0,t.createElement)(o,{ref:l,iconNode:r,className:d("lucide-".concat(a(i(e))),"lucide-".concat(e),n),...c})});return s.displayName=i(e),s}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(4517)),_N_E=e.O()}]);