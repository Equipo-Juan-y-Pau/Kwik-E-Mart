(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{1668:(e,t,r)=>{Promise.resolve().then(r.bind(r,3577))},2956:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>n,_:()=>i});var a=r(5155),l=r(2115);function s(e,t){switch(t.type){case"add":{let{id:r,options:a}=t.payload,l=e.findIndex(e=>{var t;return e.id===r&&JSON.stringify(null!==(t=e.options)&&void 0!==t?t:{})===JSON.stringify(null!=a?a:{})});if(l>=0){let r=[...e];return r[l].quantity+=t.payload.quantity,r}return[...e,t.payload]}case"remove":return e.filter(e=>e.id!==t.payload);case"update":return e.map(e=>e.id===t.payload.id?{...e,quantity:t.payload.qty}:e);case"clear":return[];default:return e}}let o=(0,l.createContext)(null);function n(e){let{children:t}=e,[r,n]=(0,l.useReducer)(s,[]),i=(0,l.useCallback)(e=>n({type:"add",payload:e}),[]),d=(0,l.useCallback)(e=>n({type:"remove",payload:e}),[]),c=(0,l.useCallback)((e,t)=>n({type:"update",payload:{id:e,qty:t}}),[]),u=(0,l.useCallback)(()=>n({type:"clear"}),[]);return(0,a.jsx)(o.Provider,{value:{items:r,addItem:i,removeItem:d,updateItemQuantity:c,clear:u},children:t})}function i(){let e=(0,l.useContext)(o);if(!e)throw Error("useCart() must be inside <CartProvider>");return e}},3577:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(5155),l=r(2115);let s=function(){let[e,t]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("kwikemart_productos")||"[]"),r=JSON.parse(localStorage.getItem("kwikemart_promos")||"[]"),a=JSON.parse(localStorage.getItem("kwikemart_promo_productos")||"[]");t(e.map(e=>{let t=a.find(t=>t.idProducto===e.id),l=t?r.find(e=>e.id===t.idPromo):void 0;return{...e,promo:l}}))},[]),e};var o=r(6766),n=r(9695);let i=[{id:1,productoId:1,usuario:"Lisa",calificacion:5,comentario:"\xa1El mejor Squishee!",fecha:"2025-06-22"},{id:2,productoId:1,usuario:"Bart",calificacion:4,comentario:"Bueno, pero le falta az\xfacar.",fecha:"2025-06-20"},{id:3,productoId:2,usuario:"Homero",calificacion:5,comentario:"\xd1am \xd1am \xd1am.",fecha:"2025-06-21"},{id:4,productoId:2,usuario:"Marge",calificacion:4,comentario:"Demasiado dulce para m\xed.",fecha:"2025-06-21"},{id:5,productoId:2,usuario:"Maggie",calificacion:5,comentario:"\xa1Genial!",fecha:"2025-06-21"},{id:6,productoId:3,usuario:"Milhouse",calificacion:3,comentario:"No es Buzz Cola de verdad.",fecha:"2025-06-19"}],d=e=>{let t=i.filter(t=>t.productoId===e);return t.length?t.reduce((e,t)=>e+t.calificacion,0)/t.length:null},c=e=>{let{rating:t}=e;return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-yellow-50 text-gray-800 text-base font-bold shadow-sm",children:[(0,a.jsx)("svg",{viewBox:"0 0 20 20",className:"w-5 h-5 text-yellow-400",fill:"currentColor",children:(0,a.jsx)("path",{d:"M10 15l-5.09 2.67 1-5.8-4.21-4.1 5.82-.85L10 2.5l2.48 5.02 5.82.85-4.21 4.1 1 5.8z"})}),"number"==typeof t?t.toFixed(1):(0,a.jsx)("span",{className:"opacity-50",children:"–"})]})};function u(e){let{producto:t,onAdd:r,onSelect:l}=e,{unit:s,old:i}=(0,n.o4)(t.promo,t.precio,1),u=d(t.id),x=!!t.promo,m=(0,n.kv)(t.promo),h=t.imagen.startsWith("/")?t.imagen:"/images/".concat(t.imagen);return(0,a.jsxs)("div",{onClick:()=>l(t),className:"relative cursor-pointer bg-white dark:[background-color:oklch(0.83_0.01_258.02)]\n                 rounded-2xl shadow-md hover:shadow-xl transition p-4 flex flex-col items-center\n                 ".concat(x?"border-4 border-blue-400":"border border-transparent"),children:[x&&(0,a.jsxs)("div",{className:"absolute top-3 right-3 flex flex-col items-end z-10",children:[(0,a.jsx)("span",{className:"bg-blue-500 text-xs font-simpson text-outline-blue text-yellow-300 px-3 py-1 rounded-full shadow-md mb-1",children:"PROMO"}),(0,a.jsx)("span",{className:"text-sm font-simpson text-outline-yellow text-blue-600 drop-shadow-sm",style:{letterSpacing:"1px"},children:m})]}),(0,a.jsx)(o.default,{src:h,alt:t.nombre,width:128,height:128,loading:"lazy",className:"w-32 h-32 object-contain mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 text-center",children:t.nombre}),(0,a.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,a.jsx)(c,{rating:u})}),i?(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"text-red-500 line-through text-lg",children:["$",i.toFixed(2)]}),(0,a.jsxs)("span",{className:"text-green-500 text-xl font-bold",children:["$",s.toFixed(2)]})]}):(0,a.jsxs)("p",{className:"text-green-500 dark:text-black font-bold mb-2",children:["$",s.toFixed(2)]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t)},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl transition",children:"A\xf1adir al carrito"})]})}function x(e){let{value:t,onChange:r}=e;return(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("input",{type:"text",placeholder:"\uD83D\uDD0D Buscar producto…",value:t,onChange:e=>r(e.target.value),className:"w-full max-w-md px-5 py-3 rounded-xl bg-white shadow-sm   border border-green-300 text-black focus:outline-none   focus:ring-2 focus:ring-green-400"})})}function m(e){let{onClick:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-center mb-8",children:[(0,a.jsx)("span",{className:"font-semibold dark:text-white",children:"Filtrar por:"}),(0,a.jsxs)("button",{onClick:t,className:"   flex items-center gap-1 px-3 py-1.5 rounded-full border shadow-sm   border-gray-300  bg-white  text-gray-800   hover:bg-gray-100      transition   ",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h18l-7 9v7H10v-7L3 4z"})}),(0,a.jsx)("span",{className:"text-sm hidden sm:inline",children:"Abrir filtros"})]})]})}function h(e){let{show:t,onClose:r,etiquetas:s,etiquetaActiva:o,setEtiqueta:n,precioMin:i,precioMax:d,setPrecioMin:c,setPrecioMax:u,limpiar:x,promos:m,setPromos:h,rating45:g,setRating45:p,nuevos:b,setNuevos:f}=e;if((0,l.useEffect)(()=>{document.body.style.overflow=t?"hidden":"auto"},[t]),!t)return null;let y=e=>e?"px-3 py-1.5 rounded-full border text-sm bg-green-500 text-white":"px-3 py-1.5 rounded-full border text-sm border-gray-300 bg-gray-100 text-gray-800 dark:border-amber-200 dark:bg-amber-100";return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 sm:pt-12",children:[(0,a.jsx)("button",{"aria-label":"Cerrar filtros",onClick:r,className:"absolute inset-0 bg-gray-900/40 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg max-h-[90vh] overflow-y-auto rounded-2xl shadow-xl bg-white dark:bg-amber-100",children:[(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between border-b border-gray-200 dark:border-amber-100 dark:text-black",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Filtrar por:"}),(0,a.jsx)("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-amber-50",onClick:r,children:"✕"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-8 bg-white dark:bg-yellow-500 rounded-b-2xl",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>h(!m),className:y(m),children:"\uD83C\uDF1F Promos"}),(0,a.jsx)("button",{onClick:()=>p(!g),className:y(g),children:"⭐ +4.5"}),(0,a.jsx)("button",{onClick:()=>f(!b),className:y(b),children:"\uD83D\uDED2 \xa1Nuevos!"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-2 font-semibold text-gray-800 dark:text-gray-800",children:"Categor\xedas"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>{let t=o===e;return(0,a.jsx)("button",{onClick:()=>n(t?null:e),className:t?"px-4 py-1.5 rounded-full text-sm capitalize border border-green-600 bg-green-500 text-white":"px-4 py-1.5 rounded-full text-sm capitalize border border-gray-300 bg-white text-gray-700 hover:bg-gray-100 dark:border-amber-300 dark:bg-amber-100 dark:text-gray-800",children:e},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-2 font-semibold text-gray-800 dark:text-gray-800",children:"Precio ($ USD)"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm dark:text-gray-800",children:"M\xedn:"}),(0,a.jsx)("input",{type:"number",value:i,onChange:e=>c(Number(e.target.value)),className:"w-24 px-3 py-1.5 text-center rounded-lg border border-gray-300 bg-white text-gray-800 focus:ring-2 focus:ring-green-500 dark:border-amber-300 dark:bg-amber-50 dark:text-gray-800"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm dark:text-gray-800",children:"M\xe1x:"}),(0,a.jsx)("input",{type:"number",value:d,onChange:e=>u(Number(e.target.value)),className:"w-24 px-3 py-1.5 text-center rounded-lg border border-gray-300 bg-white text-gray-800 focus:ring-2 focus:ring-green-500 dark:border-amber-300 dark:bg-amber-100 dark:text-gray-800"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-2 border-t border-gray-200 dark:border-amber-300",children:[(0,a.jsx)("button",{onClick:x,className:"flex-1 py-2 rounded-xl border border-green-600 text-green-600 hover:bg-green-50 dark:bg-amber-100 dark:text-gray-800",children:"Limpiar"}),(0,a.jsx)("button",{onClick:r,className:"flex-1 py-2 rounded-xl bg-green-500 hover:bg-green-600 text-white dark:text-gray-800",children:"Aplicar"})]})]})]})]})}function g(e){let{value:t,onChange:r,min:l=1}=e;return(0,a.jsxs)("div",{className:"flex items-center border rounded-xl px-2 py-1 min-w-[128px] bg-white dark:bg-white/10 border-gray-200 dark:border-white/20",children:[(0,a.jsx)("button",{"aria-label":t>l?"Disminuir":"Eliminar",className:"p-1",onClick:()=>r(Math.max(l,t-1)),children:t===l?(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 7h12M9 7V6a2 2 0 012-2h2a2 2 0 012 2v1m-7 0v10a2 2 0 002 2h4a2 2 0 002-2V7M10 11v6m4-6v6"})}):(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})}),(0,a.jsx)("span",{className:"w-6 text-center font-mono text-lg select-none text-gray-800 dark:text-white",children:t}),(0,a.jsx)("button",{"aria-label":"Aumentar",className:"p-1",onClick:()=>r(t+1),children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}function p(e){let{label:t,value:r,options:l,onChange:s}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"block font-semibold capitalize dark:text-gray-800",children:t}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{value:r,onChange:e=>s(e.target.value),className:"w-full appearance-none border border-gray-300 dark:border-gray-600   bg-white dark:[background-color:#ffd68a] text-gray-800 dark:text-gray-800   rounded-lg px-3 py-2 pr-10 focus:ring-2 focus:ring-green-400 focus:outline-none",children:l.map(e=>(0,a.jsx)("option",{children:e},e))}),(0,a.jsx)("svg",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M7 7l3 3 3-3",stroke:"currentColor",strokeWidth:2,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}function b(e){let{value:t,onChange:r,readOnly:l}=e;return(0,a.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>null==r?void 0:r(e),disabled:l,tabIndex:l?-1:0,children:(0,a.jsx)("svg",{className:"w-5 h-5 ".concat(e<=t?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 15l-5.09 2.67 1-5.8-4.21-4.1 5.82-.85L10 2.5l2.48 5.02 5.82.85-4.21 4.1 1 5.8z"})})},e))})}function f(e){let{onSubmit:t}=e,[r,s]=(0,l.useState)(!1),[o,n]=(0,l.useState)(""),[i,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(5),x=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var e;r&&(null===(e=x.current)||void 0===e||e.focus())},[r]),(0,a.jsx)("div",{className:"transition-all duration-300 bg-transparent border-b dark:border-white/30 pb-2 ".concat(r?"mb-2":""),children:r?(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&i.trim()&&(t({nombre:o,comentario:i,calificacion:c}),n(""),d(""),u(5),s(!1))},className:"flex flex-col gap-2",children:[(0,a.jsx)("textarea",{ref:x,required:!0,placeholder:"A\xf1ade una rese\xf1a…",value:i,maxLength:200,onChange:e=>d(e.target.value),rows:2,className:"flex-1 resize-none rounded-lg border px-3 py-2 focus:ring-2 focus:ring-green-300 text-base text-gray-800 dark:text-white bg-white dark:bg-white/10 border-gray-300 dark:border-white/20",style:{minHeight:38},onBlur:e=>{e.target.value.trim()||o.trim()||s(!1)}}),(i.trim()||o.trim())&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 items-center justify-between",children:[(0,a.jsx)("input",{type:"text",required:!0,placeholder:"Tu nombre",value:o,maxLength:30,onChange:e=>n(e.target.value),className:"rounded-lg border px-3 py-2 focus:ring-2 focus:ring-green-300 w-full sm:w-48 text-gray-800 dark:text-white bg-white dark:bg-white/10 border-gray-300 dark:border-white/20"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-gray-700 dark:text-white",children:"Calificaci\xf3n:"}),(0,a.jsx)(b,{value:c,onChange:u})]}),(0,a.jsx)("button",{type:"submit",className:"ml-auto bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-xl transition",children:"Publicar"})]})]}):(0,a.jsx)("button",{"aria-label":"A\xf1ade una rese\xf1a",className:"flex w-full gap-2 text-gray-500 hover:text-gray-700 dark:text-white/70 dark:hover:text-white px-2 py-2 rounded",onClick:()=>s(!0),children:(0,a.jsx)("span",{className:"flex-1 opacity-80 text-left",children:"A\xf1ade una rese\xf1a…"})})})}function y(e){let{reviews:t}=e;return 0===t.length?(0,a.jsx)("div",{className:"text-gray-500 italic text-center py-8",children:"Sin rese\xf1as todav\xeda"}):(0,a.jsx)("div",{className:"flex flex-col gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex flex-col gap-1 border-b dark:border-white/30 pb-3 last:border-b-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-green-700",children:e.usuario}),(0,a.jsx)(b,{value:e.calificacion,readOnly:!0}),(0,a.jsx)("span",{className:"ml-auto text-xs text-gray-400",children:e.fecha})]}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-white",children:e.comentario})]},e.id))})}function v(e){let{product:t,show:r,onClose:s,onAdd:d}=e,[c,u]=(0,l.useState)({}),[x,m]=(0,l.useState)(1),[h,b]=(0,l.useState)(i),[v,j]=(0,l.useState)(!1),w=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(null==t?void 0:t.opciones){let e={};Object.entries(t.opciones).forEach(t=>{let[r,a]=t;return e[r]=String(a[0])}),u(e)}else u({});m(1)},[t]),(0,l.useEffect)(()=>{if(!r)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[r]),(0,l.useEffect)(()=>{if(!r)return;let e=e=>{"Escape"===e.key&&s()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,s]);let k=(0,l.useCallback)(()=>{d(t,c,x),s()},[t,c,x,d,s]),N=(0,l.useCallback)(e=>{let{nombre:r,comentario:a,calificacion:l}=e;t&&(b(e=>[...e,{id:Date.now(),productoId:t.id,usuario:r,comentario:a,calificacion:l,fecha:new Date().toISOString().split("T")[0]}]),setTimeout(()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},150))},[t]),C=(0,l.useMemo)(()=>t?h.filter(e=>e.productoId===t.id):[],[t,h]),{total:S,old:M,tag:D,value:E}=(0,l.useMemo)(()=>t?(0,n.o4)(t.promo,t.precio,x):{total:0,old:null,tag:null,value:null},[t,x]);if(!r||!t)return null;let L="px-3 py-1 rounded-full font-simpson text-base shadow";return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",style:{overflowY:"auto"},children:[(0,a.jsx)("button",{"aria-label":"Cerrar",onClick:s,className:"absolute inset-0 cursor-default",tabIndex:-1}),(0,a.jsxs)("div",{className:"relative w-full max-w-2xl bg-white dark:[background-color:oklch(0.74_0.03_257.87)] rounded-2xl shadow-xl max-h-[90vh] flex flex-col overflow-y-auto",children:[(0,a.jsxs)("header",{className:"flex justify-between items-center p-4 border-b dark:border-white/30",children:[(0,a.jsx)("div",{className:"flex flex-col gap-1 flex-1",children:(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold dark:text-gray-800",children:t.nombre}),t.promo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"".concat(L," ").concat("bg-blue-500 text-yellow-300 dark:bg-yellow-300 dark:text-blue-600 border-2 border-blue-700 dark:border-yellow-400"),children:"PROMO"}),D&&(0,a.jsx)("span",{className:"".concat(L," ").concat("bg-yellow-300 text-blue-600 dark:bg-blue-700 dark:text-yellow-300 border-2 border-yellow-500 dark:border-blue-400"),children:"Descuento"===D?E:D})]})]})}),(0,a.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100",children:"✕"})]}),(0,a.jsxs)("section",{className:"px-5 py-6 flex flex-col gap-4 flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-8 items-center",children:[(0,a.jsx)(o.default,{src:t.imagen,alt:t.nombre,width:224,height:224,className:"w-40 h-40 md:w-56 md:h-56 object-contain mb-3 md:mb-0"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-gray-800 dark:text-gray-900",children:t.descripcion}),t.opciones&&Object.entries(t.opciones).map(e=>{let[t,r]=e;return(0,a.jsx)(p,{label:t,value:c[t],options:r,onChange:e=>u(r=>({...r,[t]:e}))},t)}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsx)(g,{value:x,onChange:m}),(0,a.jsxs)("span",{className:"ml-2 flex items-end gap-2",children:[M&&(0,a.jsxs)("span",{className:"text-red-500 line-through text-lg select-none",children:["$",M.toFixed(2)]}),(0,a.jsxs)("span",{className:"text-green-600 dark:text-green-400 select-none text-2xl font-extrabold",children:["$",S.toFixed(2)]}),x>1&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(total)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsx)("button",{onClick:s,className:"flex-1 py-2 rounded-xl border border-gray-300 dark:border-white/20 bg-white dark:bg-white/80",children:"Cancelar"}),(0,a.jsx)("button",{onClick:k,className:"flex-1 py-2 rounded-xl bg-green-500 hover:bg-green-600 text-white",children:"A\xf1adir al carrito"})]})]})]}),(0,a.jsx)(f,{onSubmit:N}),(0,a.jsxs)("div",{className:"flex items-center justify-between w-full mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Rese\xf1as"}),(0,a.jsx)("button",{type:"button",className:"text-blue-600 hover:underline font-bold text-sm",onClick:()=>j(e=>!e),children:v?"Ocultar":"Mostrar"})]}),v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y,{reviews:C}),(0,a.jsx)("div",{ref:w})]})]})]})]})}var j=r(2956);let w=e=>{if(!e.opciones)return;let t={};for(let[r,a]of Object.entries(e.opciones))Array.isArray(a)&&a.length&&(t[r]=a[0]);return Object.keys(t).length?t:void 0};function k(){let e=s(),[t,r]=(0,l.useState)(0),[o,n]=(0,l.useState)(0),[d,c]=(0,l.useState)(""),[g,p]=(0,l.useState)(null),[b,f]=(0,l.useState)(!1),[y,k]=(0,l.useState)(!1),[N,C]=(0,l.useState)(!1),[S,M]=(0,l.useState)(!1),[D,E]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(e.length){let t=e.map(e=>e.precio);r(Math.min(...t)),n(Math.max(...t))}},[e]);let{addItem:L}=(0,j._)(),I=e=>L({id:String(e.id),name:e.nombre,price:e.precio,image:e.imagen,quantity:1,options:w(e),promo:e.promo}),O=(0,l.useMemo)(()=>{let r=d.trim().toLowerCase();return e.filter(e=>{var a;let l=!r||e.nombre.toLowerCase().includes(r),s=!g||e.etiquetas.includes(g),n=e.precio>=t&&e.precio<=o,d=!b||!!e.promo,c=!y||(null===(a=e.promo)||void 0===a?void 0:a.tipo)==="nuevo",u=i.filter(t=>t.productoId===e.id),x=u.length?u.reduce((e,t)=>e+t.calificacion,0)/u.length:0,m=!N||x>=4.5;return l&&s&&n&&d&&c&&m})},[e,d,g,t,o,b,y,N]),P=(0,l.useMemo)(()=>Array.from(new Set(e.flatMap(e=>e.etiquetas))),[e]);return e.length?(0,a.jsxs)("main",{className:"min-h-screen bg-yellow-50 dark:bg-gray-800 py-10 px-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-extrabold text-green-500 dark:text-yellow-500 text-center mb-4",children:"\uD83D\uDED2 Productos del Kwik-E-Mart"}),(0,a.jsx)("p",{className:"text-center text-lg text-gray-700 dark:text-white mb-6",children:"Explora nuestra variedad de productos y a\xf1ade tus favoritos al carrito."}),(0,a.jsx)(x,{value:d,onChange:c}),(0,a.jsx)(m,{onClick:()=>M(!0)}),0===O.length?(0,a.jsx)("p",{className:"text-center text-gray-600",children:"No encontramos productos."}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:O.map(e=>(0,a.jsx)(u,{producto:e,onAdd:I,onSelect:E},e.id))}),(0,a.jsx)(h,{show:S,onClose:()=>M(!1),etiquetas:P,etiquetaActiva:g,setEtiqueta:p,precioMin:t,setPrecioMin:r,precioMax:o,setPrecioMax:n,limpiar:()=>{if(c(""),p(null),f(!1),k(!1),C(!1),e.length){let t=e.map(e=>e.precio);r(Math.min(...t)),n(Math.max(...t))}},promos:b,setPromos:f,rating45:N,setRating45:C,nuevos:y,setNuevos:k}),(0,a.jsx)(v,{show:!!D,product:D,onClose:()=>E(null),onAdd:(e,t,r)=>L({id:String(e.id),name:e.nombre,price:e.precio,image:e.imagen,quantity:r,options:t,promo:e.promo})})]}):(0,a.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl text-gray-500",children:"Cargando productos…"})})}},9695:(e,t,r)=>{"use strict";function a(e){if(!e)return null;switch(e.tipo){case"descuento":return"%".concat(e.valor);case"2x1":return"2x1";case"nuevo":return"\xa1Nuevo!";case"solo-hoy":return"\xa1S\xf3lo hoy!";default:return""}}function l(e,t,r){let a=t*r;if(!e)return{total:a,old:null,tag:null,value:null,unit:t};if("descuento"===e.tipo){let l=Math.round(t*(100-e.valor)/100*100)/100,s=l*r;return{total:s,old:s<a?a:null,tag:"Descuento",value:"-".concat(e.valor,"%"),unit:l}}if("2x1"===e.tipo){let e=t*Math.ceil(r/2);return{total:e,old:e<a?a:null,tag:"2x1",value:"\xa1Lleva 2, paga 1!",unit:t}}return{total:a,old:null,tag:e.tipo,value:null,unit:t}}r.d(t,{kv:()=>a,o4:()=>l})}},e=>{var t=t=>e(e.s=t);e.O(0,[766,441,684,358],()=>t(1668)),_N_E=e.O()}]);